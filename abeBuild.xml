<?xml version="1.0" encoding="UTF-8"?>

<project name="tap-framework-appscan" default="build" basedir=".">
    <!-- first create our properties -->

    <condition property="isWindows">
        <os family="windows" />
    </condition>

    <condition property="isUnix">
        <os family="Unix" />
    </condition>
    
    <target name="build" depends="clean">
	
        <mkdir dir="dist"/>
	
        <antcall target="GO"/>
    
        <copy todir="dist">
            <fileset dir="target">
                <include name="*.jar"/>
            </fileset>
        </copy>
    </target>
  
    <target name="clean" description="Remove generated files">
        <delete dir="dist" quiet="true"/>
    </target>

    <target name="doWindows" if="isWindows">
        <exec dir="." executable="cmd">
            <arg line="/c mvn clean install" />
        </exec>
    </target>

    <target name="doLinux" if="isUnix">
        <exec dir="." executable="sh">
            <arg line="mvn clean install" />
        </exec>
    </target>

    <!-- run everything from our main target -->
    <!-- the other targets will only be run when their properties are true -->
    <target name="GO" depends="doWindows, doLinux">
        <echo message="os.name = ${os.name}" />
        <echo message="os.arch = ${os.arch}" />
        <echo message="os.version = ${os.version}" />
    </target>
  
</project>
